<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Parsing support for a log target filter, as used by env_logger and tracing::EnvFilter."><title>parse_env_filter - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-b1a3e7f8283b8434.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="parse_env_filter" data-themes="" data-resource-suffix="" data-rustdoc-version="1.77.0-nightly (d5fd09972 2024-01-22)" data-channel="nightly" data-search-js="search-dd67cee4cfa65049.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-f2adc0d6ca4d09fb.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-48f368f3872407c8.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-04d5337699b92874.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../parse_env_filter/index.html">parse_env_filter</a><span class="version">0.1.0</span></h2></div><div class="sidebar-elems"><ul class="block">
            <li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#functions">Functions</a></li></ul></section></div></nav><div class="sidebar-resizer"></div>
    <main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../parse_env_filter/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">parse_env_filter</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../src/parse_env_filter/lib.rs.html#1-52">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Parsing support for a log target filter, as used by <a href="https://docs.rs/env_logger/">env_logger</a> and <a href="https://docs.rs/tracing-subscriber/0.2/tracing_subscriber/filter/struct.EnvFilter.html">tracing::EnvFilter</a>.</p>
<p>We always support the extended tracing format, that is</p>
<div class="example-wrap"><pre class="language-text"><code>target[span{field=value}]=level
</code></pre></div>
<p>with the following validity rules:</p>
<ul>
<li>All fields are optional, and MAY be omitted</li>
<li>All fields MUST NOT contain the syntax characters <code>[]{}=,&quot;/</code>
<ul>
<li>This may be relaxed in the future, to allow e.g. matched brackets in <code>value</code> and/or quoting values</li>
</ul>
</li>
<li>Unlike env_logger/tracing::EnvFilter, we treat a bare level name as a target, not a level directive
<ul>
<li>Adding this behavior back is simple — check if only a target is set and if so try it as a level</li>
</ul>
</li>
</ul>
<p>Note that these rules do not trim whitespace; you’ll likely want to yourself.
If you want further verification, you can add it on after the parse step.
This crate is merely intended to pull the directives out of the format, not
to ensure that the directives are otherwise well-formed or meaningful.</p>
<h3 id="features-not-supported"><a class="doc-anchor" href="#features-not-supported">§</a>Features not supported</h3>
<ul>
<li>With tracing::EnvFilter, parsing is ad-hoc and can often allow odd edge cases through.
We instead opt to be strict and require exactly matching the syntax, rather than sloppy acceptance.</li>
<li>Along the same lines, tracing allows (and sometimes expects) using quotes in field filter values.
Quotes are currently reserved, such that a quoted syntax that allows syntax characters in filter
fields can be added in the future.</li>
<li>env_logger supports a global <code>/regex</code> directive to filter messages via a regex. This applies
separately and to all other earlier directives, and as such doesn’t quite fit the filter
iterator design we’ve taken. However, we have reserved the <code>/</code> character for clarity
and such that a filter field can potentially be added with this syntax in the future.</li>
<li>tracing::EnvFilter interprets the value of field=value as a regular expression. We explicitly
leave that level of interpretation up to the consumer, as this library is just for parsing.</li>
</ul>
</div></details><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="eager/index.html" title="mod parse_env_filter::eager">eager</a></div><div class="desc docblock-short">Eagerly fully-parsed event filters.</div></li></ul><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.FieldFilter.html" title="struct parse_env_filter::FieldFilter">FieldFilter</a></div><div class="desc docblock-short">A single field filter, <code>{field=value}</code>.</div></li><li><div class="item-name"><a class="struct" href="struct.FieldFilters.html" title="struct parse_env_filter::FieldFilters">FieldFilters</a></div><div class="desc docblock-short">Parser-iterator of <a href="struct.FieldFilter.html" title="struct parse_env_filter::FieldFilter">FieldFilter</a>s.</div></li><li><div class="item-name"><a class="struct" href="struct.Filter.html" title="struct parse_env_filter::Filter">Filter</a></div><div class="desc docblock-short">A single event filter, <code>target[span{field=value}]=level</code>.</div></li><li><div class="item-name"><a class="struct" href="struct.Filters.html" title="struct parse_env_filter::Filters">Filters</a></div><div class="desc docblock-short">Parser-iterator of <a href="struct.Filter.html" title="struct parse_env_filter::Filter">Filter</a>s.</div></li><li><div class="item-name"><a class="struct" href="struct.SpanFilter.html" title="struct parse_env_filter::SpanFilter">SpanFilter</a></div><div class="desc docblock-short">A single span filter, <code>[span{field=value}]</code>.</div></li><li><div class="item-name"><a class="struct" href="struct.SpanFilters.html" title="struct parse_env_filter::SpanFilters">SpanFilters</a></div><div class="desc docblock-short">Parser-iterator of <a href="struct.SpanFilter.html" title="struct parse_env_filter::SpanFilter">SpanFilter</a>s.</div></li></ul><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.ParseError.html" title="enum parse_env_filter::ParseError">ParseError</a></div></li></ul><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.filters.html" title="fn parse_env_filter::filters">filters</a></div><div class="desc docblock-short">Parse a series of filters out of a directive string.</div></li></ul></section></div></main></body></html>