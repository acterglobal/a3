<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="`RoomListService` API."><title>matrix_sdk_ui::room_list_service - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-b1a3e7f8283b8434.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="matrix_sdk_ui" data-themes="" data-resource-suffix="" data-rustdoc-version="1.77.0-nightly (d5fd09972 2024-01-22)" data-channel="nightly" data-search-js="search-dd67cee4cfa65049.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../static.files/storage-f2adc0d6ca4d09fb.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-48f368f3872407c8.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-04d5337699b92874.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../matrix_sdk_ui/index.html">matrix_sdk_ui</a><span class="version">0.7.0</span></h2></div><h2 class="location"><a href="#">Module room_list_service</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#constants">Constants</a></li></ul></section><h2><a href="../index.html">In crate matrix_sdk_ui</a></h2></div></nav><div class="sidebar-resizer"></div>
    <main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../../matrix_sdk_ui/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">matrix_sdk_ui</a>::<wbr><a class="mod" href="#">room_list_service</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../src/matrix_sdk_ui/room_list_service/mod.rs.html#15-722">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p><code>RoomListService</code> API.</p>
<p>The <code>RoomListService</code> is a UI API dedicated to present a list of Matrix
rooms to the user. The syncing is handled by <a href="../../matrix_sdk/sliding_sync/struct.SlidingSync.html" title="struct matrix_sdk::sliding_sync::SlidingSync"><code>SlidingSync</code></a>. The idea is to
expose a simple API to handle most of the client app use cases, like:
Showing and updating a list of rooms, filtering a list of rooms, handling
particular updates of a range of rooms (the ones the client app is showing
to the view, i.e. the rooms present in the viewport) etc.</p>
<p>As such, the <code>RoomListService</code> works as an opinionated state machine. The
states are defined by <a href="enum.State.html" title="enum matrix_sdk_ui::room_list_service::State"><code>State</code></a>. Actions are attached to the each state
transition. Apart from that, one can apply <a href="enum.Input.html" title="enum matrix_sdk_ui::room_list_service::Input"><code>Input</code></a>s on the state machine,
like notifying that the client app viewport of the room list has changed (if
the user of the client app has scrolled in the room list for example) etc.</p>
<p>The API is purposely small. Sliding Sync is versatile. <code>RoomListService</code> is
<em>one</em> specific usage of Sliding Sync.</p>
<h2 id="basic-principle"><a class="doc-anchor" href="#basic-principle">§</a>Basic principle</h2>
<p><code>RoomListService</code> works with 2 Sliding Sync List:</p>
<ul>
<li><code>all_rooms</code> (referred by the constant <a href="constant.ALL_ROOMS_LIST_NAME.html" title="constant matrix_sdk_ui::room_list_service::ALL_ROOMS_LIST_NAME"><code>ALL_ROOMS_LIST_NAME</code></a>) is the main
list. Its goal is to load all the user’ rooms. It starts with a
<a href="../../matrix_sdk/sliding_sync/list/enum.SlidingSyncMode.html#variant.Selective" title="variant matrix_sdk::sliding_sync::list::SlidingSyncMode::Selective"><code>SlidingSyncMode::Selective</code></a> sync-mode with a small range (i.e. a small
set of rooms) to load the first rooms quickly, and then updates to a
<a href="../../matrix_sdk/sliding_sync/list/enum.SlidingSyncMode.html#variant.Growing" title="variant matrix_sdk::sliding_sync::list::SlidingSyncMode::Growing"><code>SlidingSyncMode::Growing</code></a> sync-mode to load the remaining rooms “in the
background”: it will sync the existing rooms and will fetch new rooms, by
a certain batch size.</li>
<li><code>visible_rooms</code> (referred by the constant <a href="constant.VISIBLE_ROOMS_LIST_NAME.html" title="constant matrix_sdk_ui::room_list_service::VISIBLE_ROOMS_LIST_NAME"><code>VISIBLE_ROOMS_LIST_NAME</code></a>) is
the “reactive” list. Its goal is to react to the client app user actions.
If the user scrolls in the room list, the <code>visible_rooms</code> will be
configured to sync for the particular range of rooms the user is actually
seeing (the rooms in the current viewport). <code>visible_rooms</code> has a
different configuration than <code>all_rooms</code> as it loads more timeline events:
it means that the room will already have a “history”, a timeline, ready to
be presented when the user enters the room.</li>
</ul>
<p>This behavior has proven to be empirically satisfying to provide a fast and
fluid user experience for a Matrix client.</p>
<p><a href="struct.RoomListService.html#method.all_rooms" title="method matrix_sdk_ui::room_list_service::RoomListService::all_rooms"><code>RoomListService::all_rooms</code></a> provides a way to get a <a href="struct.RoomList.html" title="struct matrix_sdk_ui::room_list_service::RoomList"><code>RoomList</code></a> for all
the rooms. From that, calling <a href="struct.RoomList.html#method.entries" title="method matrix_sdk_ui::room_list_service::RoomList::entries"><code>RoomList::entries</code></a> provides a way to get a
stream of room list entry. This stream can be filtered, and the filter can
be changed over time.</p>
<p><a href="struct.RoomListService.html#method.state" title="method matrix_sdk_ui::room_list_service::RoomListService::state"><code>RoomListService::state</code></a> provides a way to get a stream of the state
machine’s state, which can be pretty helpful for the client app.</p>
</div></details><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="filters/index.html" title="mod matrix_sdk_ui::room_list_service::filters">filters</a></div></li></ul><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.Room.html" title="struct matrix_sdk_ui::room_list_service::Room">Room</a></div><div class="desc docblock-short">A room in the room list.</div></li><li><div class="item-name"><a class="struct" href="struct.RoomList.html" title="struct matrix_sdk_ui::room_list_service::RoomList">RoomList</a></div><div class="desc docblock-short">A <code>RoomList</code> represents a list of rooms, from a
<a href="struct.RoomListService.html" title="struct matrix_sdk_ui::room_list_service::RoomListService"><code>RoomListService</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.RoomListDynamicEntriesController.html" title="struct matrix_sdk_ui::room_list_service::RoomListDynamicEntriesController">RoomListDynamicEntriesController</a></div><div class="desc docblock-short">Controller for the <a href="struct.RoomList.html" title="struct matrix_sdk_ui::room_list_service::RoomList"><code>RoomList</code></a> dynamic entries.</div></li><li><div class="item-name"><a class="struct" href="struct.RoomListService.html" title="struct matrix_sdk_ui::room_list_service::RoomListService">RoomListService</a></div><div class="desc docblock-short">The <a href="struct.RoomListService.html" title="struct matrix_sdk_ui::room_list_service::RoomListService"><code>RoomListService</code></a> type. See the module’s documentation to learn more.</div></li></ul><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.Error.html" title="enum matrix_sdk_ui::room_list_service::Error">Error</a></div><div class="desc docblock-short"><a href="struct.RoomList.html" title="struct matrix_sdk_ui::room_list_service::RoomList"><code>RoomList</code></a>’s errors.</div></li><li><div class="item-name"><a class="enum" href="enum.Input.html" title="enum matrix_sdk_ui::room_list_service::Input">Input</a></div><div class="desc docblock-short">An input for the <a href="struct.RoomList.html" title="struct matrix_sdk_ui::room_list_service::RoomList"><code>RoomList</code></a>’ state machine.</div></li><li><div class="item-name"><a class="enum" href="enum.InputResult.html" title="enum matrix_sdk_ui::room_list_service::InputResult">InputResult</a></div><div class="desc docblock-short">An <a href="enum.Input.html" title="enum matrix_sdk_ui::room_list_service::Input"><code>Input</code></a> Ok result: whether it’s been applied, or ignored.</div></li><li><div class="item-name"><a class="enum" href="enum.RoomListEntry.html" title="enum matrix_sdk_ui::room_list_service::RoomListEntry">RoomListEntry</a></div><div class="desc docblock-short">Represent a room entry in the <a href="../../matrix_sdk/sliding_sync/list/struct.SlidingSyncList.html" title="struct matrix_sdk::sliding_sync::list::SlidingSyncList"><code>SlidingSyncList</code></a>.</div></li><li><div class="item-name"><a class="enum" href="enum.RoomListLoadingState.html" title="enum matrix_sdk_ui::room_list_service::RoomListLoadingState">RoomListLoadingState</a></div><div class="desc docblock-short">The loading state of a <a href="struct.RoomList.html" title="struct matrix_sdk_ui::room_list_service::RoomList"><code>RoomList</code></a>.</div></li><li><div class="item-name"><a class="enum" href="enum.State.html" title="enum matrix_sdk_ui::room_list_service::State">State</a></div><div class="desc docblock-short">The state of the <a href="struct.RoomList.html" title="struct matrix_sdk_ui::room_list_service::RoomList"><code>super::RoomList</code></a>’ state machine.</div></li><li><div class="item-name"><a class="enum" href="enum.SyncIndicator.html" title="enum matrix_sdk_ui::room_list_service::SyncIndicator">SyncIndicator</a></div><div class="desc docblock-short">An hint whether a <em>sync spinner/loader/toaster</em> should be prompted to the
user, indicating that the <a href="struct.RoomListService.html" title="struct matrix_sdk_ui::room_list_service::RoomListService"><code>RoomListService</code></a> is syncing.</div></li></ul><h2 id="constants" class="section-header">Constants<a href="#constants" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="constant" href="constant.ALL_ROOMS_DEFAULT_GROWING_BATCH_SIZE.html" title="constant matrix_sdk_ui::room_list_service::ALL_ROOMS_DEFAULT_GROWING_BATCH_SIZE">ALL_ROOMS_DEFAULT_GROWING_BATCH_SIZE</a></div><div class="desc docblock-short">Default <code>batch_size</code> for the growing sync-mode of the <code>ALL_ROOMS_LIST_NAME</code>
list.</div></li><li><div class="item-name"><a class="constant" href="constant.ALL_ROOMS_DEFAULT_SELECTIVE_RANGE.html" title="constant matrix_sdk_ui::room_list_service::ALL_ROOMS_DEFAULT_SELECTIVE_RANGE">ALL_ROOMS_DEFAULT_SELECTIVE_RANGE</a></div><div class="desc docblock-short">Default <code>batch_size</code> for the selective sync-mode of the
<code>ALL_ROOMS_LIST_NAME</code> list.</div></li><li><div class="item-name"><a class="constant" href="constant.ALL_ROOMS_LIST_NAME.html" title="constant matrix_sdk_ui::room_list_service::ALL_ROOMS_LIST_NAME">ALL_ROOMS_LIST_NAME</a></div></li><li><div class="item-name"><a class="constant" href="constant.INVITES_DEFAULT_GROWING_BATCH_SIZE.html" title="constant matrix_sdk_ui::room_list_service::INVITES_DEFAULT_GROWING_BATCH_SIZE">INVITES_DEFAULT_GROWING_BATCH_SIZE</a></div><div class="desc docblock-short">Default <code>batch_size</code> for the growing sync-mode of the <code>INVITES_LIST_NAME</code>
list.</div></li><li><div class="item-name"><a class="constant" href="constant.INVITES_DEFAULT_SELECTIVE_RANGE.html" title="constant matrix_sdk_ui::room_list_service::INVITES_DEFAULT_SELECTIVE_RANGE">INVITES_DEFAULT_SELECTIVE_RANGE</a></div><div class="desc docblock-short">Default <code>range</code> for the selective sync-mode of the <code>INVITES_LIST_NAME</code> list.</div></li><li><div class="item-name"><a class="constant" href="constant.INVITES_LIST_NAME.html" title="constant matrix_sdk_ui::room_list_service::INVITES_LIST_NAME">INVITES_LIST_NAME</a></div></li><li><div class="item-name"><a class="constant" href="constant.VISIBLE_ROOMS_DEFAULT_RANGE.html" title="constant matrix_sdk_ui::room_list_service::VISIBLE_ROOMS_DEFAULT_RANGE">VISIBLE_ROOMS_DEFAULT_RANGE</a></div><div class="desc docblock-short">Default range for the <code>VISIBLE_ROOMS_LIST_NAME</code> list.</div></li><li><div class="item-name"><a class="constant" href="constant.VISIBLE_ROOMS_DEFAULT_TIMELINE_LIMIT.html" title="constant matrix_sdk_ui::room_list_service::VISIBLE_ROOMS_DEFAULT_TIMELINE_LIMIT">VISIBLE_ROOMS_DEFAULT_TIMELINE_LIMIT</a></div><div class="desc docblock-short">Default timeline for the <code>VISIBLE_ROOMS_LIST_NAME</code> list.</div></li><li><div class="item-name"><a class="constant" href="constant.VISIBLE_ROOMS_LIST_NAME.html" title="constant matrix_sdk_ui::room_list_service::VISIBLE_ROOMS_LIST_NAME">VISIBLE_ROOMS_LIST_NAME</a></div></li></ul></section></div></main></body></html>